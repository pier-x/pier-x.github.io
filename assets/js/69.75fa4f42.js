(self.webpackChunkpier_doc=self.webpackChunkpier_doc||[]).push([[69],{69:(e,t,o)=>{var i,s,n;n=function(e){"use strict";var t=e?e._modules:{};function o(e,t,o,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}o(t,"Series/NodesComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],(function(e,t){var o;let{series:{prototype:i,prototype:{pointClass:{prototype:s}}}}=e,{defined:n,extend:r,find:l,merge:a,pick:d}=t;return function(e){function t(){return this.data=[].concat(this.points||[],this.nodes),i.destroy.apply(this,arguments)}function o(){this.nodes&&(this.nodes.forEach((e=>{e.destroy()})),this.nodes.length=0),i.setData.apply(this,arguments)}function h(e){let t=arguments,o=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];"select"!==e&&o.forEach((e=>{e&&e.series&&(s.setState.apply(e,t),!e.isNode&&(e.fromNode.graphic&&s.setState.apply(e.fromNode,t),e.toNode&&e.toNode.graphic&&s.setState.apply(e.toNode,t)))})),s.setState.apply(this,t)}function p(e,t,o,i){let n=this.series.options.nodes,r=this.series.options.data,l=r&&r.length||0,h=r&&r[this.index];if(s.update.call(this,e,!this.isNode&&t,o,i),this.isNode){let e=(n||[]).reduce(((e,t,o)=>this.id===t.id?o:e),-1),i=a(n&&n[e]||{},r&&r[this.index]||{});r&&(h?r[this.index]=h:r.length=l),n?e>=0?n[e]=i:n.push(i):this.series.options.nodes=[i],d(t,!0)&&this.series.chart.redraw(o)}}e.compose=function(e,i){let s=e.prototype,n=i.prototype;return s.setNodeState=h,s.setState=h,s.update=p,n.destroy=t,n.setData=o,i},e.createNode=function(e){let t,o=this.pointClass,i=(e,t)=>l(e,(e=>e.id===t)),s=i(this.nodes,e);if(!s){t=this.options.nodes&&i(this.options.nodes,e);let n=new o(this,r({className:"highcharts-node",isNode:!0,id:e,y:1},t));n.linksTo=[],n.linksFrom=[],n.getSum=function(){let e=0,t=0;return n.linksTo.forEach((t=>{e+=t.weight||0})),n.linksFrom.forEach((e=>{t+=e.weight||0})),Math.max(e,t)},n.offset=function(e,t){let o=0;for(let i=0;i<n[t].length;i++){if(n[t][i]===e)return o;o+=n[t][i].weight}},n.hasShape=function(){let e=0;return n.linksTo.forEach((t=>{t.outgoing&&e++})),!n.linksTo.length||e!==n.linksTo.length},n.index=this.nodes.push(n)-1,s=n}return s.formatPrefix="node",s.name=s.name||s.options.id||"",s.mass=d(s.options.mass,s.options.marker&&s.options.marker.radius,this.options.marker&&this.options.marker.radius,4),s},e.destroy=t,e.generatePoints=function(){let e=this.chart,t={};i.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach((e=>{e.linksFrom.length=0,e.linksTo.length=0,e.level=e.options.level})),this.points.forEach((o=>{n(o.from)&&(t[o.from]||(t[o.from]=this.createNode(o.from)),t[o.from].linksFrom.push(o),o.fromNode=t[o.from],e.styledMode?o.colorIndex=d(o.options.colorIndex,t[o.from].colorIndex):o.color=o.options.color||t[o.from].color),n(o.to)&&(t[o.to]||(t[o.to]=this.createNode(o.to)),t[o.to].linksTo.push(o),o.toNode=t[o.to]),o.name=o.name||o.id}),this),this.nodeLookup=t},e.setNodeState=h,e.updateNode=p}(o||(o={})),o})),o(t,"Series/Sankey/SankeyPoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],(function(e,t,o){let{column:i}=t.seriesTypes,{defined:s}=o;class n extends i.prototype.pointClass{applyOptions(t,o){return e.prototype.applyOptions.call(this,t,o),s(this.options.level)&&(this.options.column=this.column=this.options.level),this}getClassName(){return(this.isNode?"highcharts-node ":"highcharts-link ")+e.prototype.getClassName.call(this)}getFromNode(){let e,t=-1;for(let o=0;o<this.linksTo.length;o++){let i=this.linksTo[o];i.fromNode.column>t&&i.fromNode!==this&&(t=(e=i.fromNode).column)}return{fromNode:e,fromColumn:t}}setNodeColumn(){s(this.options.column)||(0===this.linksTo.length?this.column=0:this.column=this.getFromNode().fromColumn+1)}isValid(){return this.isNode||"number"==typeof this.weight}}return n})),o(t,"Series/Sankey/SankeySeriesDefaults.js",[],(function(){return{borderWidth:0,colorByPoint:!0,curveFactor:.33,dataLabels:{enabled:!0,backgroundColor:"none",crop:!1,nodeFormat:void 0,nodeFormatter:function(){return this.point.name},format:void 0,formatter:function(){},inside:!0},inactiveOtherPoints:!0,linkColorMode:"from",linkOpacity:.5,opacity:1,minLinkWidth:0,nodeAlignment:"center",nodeWidth:20,nodePadding:10,nodeDistance:30,showInLegend:!1,states:{hover:{linkOpacity:1,opacity:1},inactive:{linkOpacity:.1,opacity:.1,animation:{duration:50}}},tooltip:{followPointer:!0,headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.fromNode.name} \u2192 {point.toNode.name}: <b>{point.weight}</b><br/>",nodeFormat:"{point.name}: <b>{point.sum}</b><br/>"}}})),o(t,"Series/Sankey/SankeyColumnComposition.js",[t["Core/Utilities.js"]],(function(e){var t;let{defined:o,relativeLength:i}=e;return function(e){e.compose=function(e,o){return e.sankeyColumn=new t(e,o),e};class t{constructor(e,t){this.points=e,this.series=t}getTranslationFactor(e){let t,o,i=this.points,s=i.slice(),n=e.chart,r=e.options.minLinkWidth||0,l=0,a=(n.plotSizeY||0)-(e.options.borderWidth||0)-(i.length-1)*e.nodePadding;for(;i.length;){for(l=a/i.sankeyColumn.sum(),t=!1,o=i.length;o--;)i[o].getSum()*l<r&&(i.splice(o,1),a=Math.max(0,a-r),t=!0);if(!t)break}for(let d of(i.length=0,s))i.push(d);return l}top(e){let t=this.series,o=t.nodePadding,i=this.points.reduce(((i,s)=>(i>0&&(i+=o),i+Math.max(s.getSum()*e,t.options.minLinkWidth||0))),0);return{top:0,center:.5,bottom:1}[t.options.nodeAlignment||"center"]*((t.chart.plotSizeY||0)-i)}left(e){let t=this.series,o=t.chart,i=t.options.equalNodes,s=o.inverted?o.plotHeight:o.plotWidth,n=t.nodePadding,r=this.points.reduce(((o,r)=>(o>0&&(o+=n),o+(i?s/r.series.nodes.length-n:Math.max(r.getSum()*e,t.options.minLinkWidth||0)))),0);return((o.plotSizeX||0)-Math.round(r))/2}sum(){return this.points.reduce(((e,t)=>e+t.getSum()),0)}offset(e,t){let s,n=this.points,r=this.series,l=r.nodePadding,a=0;if(r.is("organization")&&e.hangsFrom)return{absoluteTop:e.hangsFrom.nodeY};for(let d=0;d<n.length;d++){let h=n[d].getSum(),p=Math.max(h*t,r.options.minLinkWidth||0),c=e.options[r.chart.inverted?"offsetHorizontal":"offsetVertical"],u=e.options.offset||0;if(s=h?p+l:0,n[d]===e)return{relativeTop:a+(o(c)?i(c,p):i(u,s))};a+=s}}}e.SankeyColumnAdditions=t}(t||(t={})),t})),o(t,"Series/TreeUtilities.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],(function(e,t){let{extend:o,isArray:i,isNumber:s,isObject:n,merge:r,pick:l,relativeLength:a}=t;return{getColor:function(t,o){let i,s,n,r,a,d,h=o.index,p=o.mapOptionsToLevel,c=o.parentColor,u=o.parentColorIndex,m=o.series,f=o.colors,g=o.siblings,y=m.points,k=m.chart.options.chart;return t&&(i=y[t.i],s=p[t.level]||{},i&&s.colorByPoint&&(r=i.index%(f?f.length:k.colorCount),n=f&&f[r]),m.chart.styledMode||(a=l(i&&i.options.color,s&&s.color,n,c&&(t=>{let o=s&&s.colorVariation;return o&&"brightness"===o.key&&h&&g?e.parse(t).brighten(o.to*(h/g)).get():t})(c),m.color)),d=l(i&&i.options.colorIndex,s&&s.colorIndex,r,u,o.colorIndex)),{color:a,colorIndex:d}},getLevelOptions:function(e){let t,o,a,d,h,p,c={};if(n(e))for(d=s(e.from)?e.from:1,p=e.levels,o={},t=n(e.defaults)?e.defaults:{},i(p)&&(o=p.reduce(((e,o)=>{let i,a,h;return n(o)&&s(o.level)&&(a=l((h=r({},o)).levelIsConstant,t.levelIsConstant),delete h.levelIsConstant,delete h.level,n(e[i=o.level+(a?0:d-1)])?r(!0,e[i],h):e[i]=h),e}),{})),h=s(e.to)?e.to:1,a=0;a<=h;a++)c[a]=r({},t,n(o[a])?o[a]:{});return c},getNodeWidth:function(e,t){let{chart:o,options:i}=e,{nodeDistance:s=0,nodeWidth:n=0}=i,{plotSizeX:r=1}=o;if("auto"===n){if("string"==typeof s&&/%$/.test(s))return r/(t+parseFloat(s)/100*(t-1));let e=Number(s);return(r+e)/(t||1)-e}return a(n,r)},setTreeValues:function e(t,i){let s=i.before,n=i.idRoot,r=i.mapIdToNode[n],a=!1!==i.levelIsConstant,d=i.points[t.i],h=d&&d.options||{},p=[],c=0;t.levelDynamic=t.level-(a?0:r.level),t.name=l(d&&d.name,""),t.visible=n===t.id||!0===i.visible,"function"==typeof s&&(t=s(t,i)),t.children.forEach(((s,n)=>{let r=o({},i);o(r,{index:n,siblings:t.children.length,visible:t.visible}),s=e(s,r),p.push(s),s.visible&&(c+=s.val)}));let u=l(h.value,c);return t.visible=u>=0&&(c>0||t.visible),t.children=p,t.childrenTotal=c,t.isLeaf=t.visible&&!c,t.val=u,t},updateRootId:function(e){let t,o;return n(e)&&(o=n(e.options)?e.options:{},t=l(e.rootNode,o.rootId,""),n(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}})),o(t,"Series/Sankey/SankeySeries.js",[t["Core/Globals.js"],t["Series/NodesComposition.js"],t["Series/Sankey/SankeyPoint.js"],t["Series/Sankey/SankeySeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Color/Color.js"],t["Series/TreeUtilities.js"],t["Core/Utilities.js"]],(function(e,t,o,i,s,n,r,l,a){let{column:d,line:h}=s.seriesTypes,{parse:p}=r,{getLevelOptions:c,getNodeWidth:u}=l,{clamp:m,extend:f,isObject:g,merge:y,pick:k,relativeLength:C,stableSort:v}=a;class S extends d{static getDLOptions(e){let t=g(e.optionsPoint)?e.optionsPoint.dataLabels:{};return y({style:{}},g(e.level)?e.level.dataLabels:{},t)}createNodeColumns(){let e=[];for(let t of this.nodes)t.setNodeColumn(),e[t.column]||(e[t.column]=n.compose([],this)),e[t.column].push(t);for(let t=0;t<e.length;t++)void 0===e[t]&&(e[t]=n.compose([],this));return e}order(e,t){if(void 0===e.level)for(let o of(e.level=t,e.linksFrom))o.toNode&&this.order(o.toNode,t+1)}generatePoints(){if(t.generatePoints.apply(this,arguments),this.orderNodes){for(let e of this.nodes)0===e.linksTo.length&&this.order(e,0);v(this.nodes,((e,t)=>e.level-t.level))}}getNodePadding(){let e=this.options.nodePadding||0;if(this.nodeColumns){let t=this.nodeColumns.reduce(((e,t)=>Math.max(e,t.length)),0);t*e>this.chart.plotSizeY&&(e=this.chart.plotSizeY/t)}return e}hasData(){return!!this.processedXData.length}pointAttribs(e,t){if(!e)return{};let o=this,i=e.isNode?e.level:e.fromNode.level,s=o.mapOptionsToLevel[i||0]||{},n=e.options,l=s.states&&s.states[t||""]||{},a=["colorByPoint","borderColor","borderWidth","linkOpacity","opacity"].reduce(((e,t)=>(e[t]=k(l[t],n[t],s[t],o.options[t]),e)),{}),d=k(l.color,n.color,a.colorByPoint?e.color:s.color);return e.isNode?{fill:d,stroke:a.borderColor,"stroke-width":a.borderWidth,opacity:a.opacity}:{fill:r.parse(d).setOpacity(a.linkOpacity).get()}}drawTracker(){d.prototype.drawTracker.call(this,this.points),d.prototype.drawTracker.call(this,this.nodes)}drawPoints(){d.prototype.drawPoints.call(this,this.points),d.prototype.drawPoints.call(this,this.nodes)}drawDataLabels(){d.prototype.drawDataLabels.call(this,this.points),d.prototype.drawDataLabels.call(this,this.nodes)}translate(){this.processedXData||this.processData(),this.generatePoints(),this.nodeColumns=this.createNodeColumns();let e=this,t=this.chart,o=this.options,i=this.nodeColumns,s=i.length;for(let n of(this.nodeWidth=u(this,s),this.nodePadding=this.getNodePadding(),this.translationFactor=i.reduce(((t,o)=>Math.min(t,o.sankeyColumn.getTranslationFactor(e))),1/0),this.colDistance=(t.plotSizeX-this.nodeWidth-o.borderWidth)/Math.max(1,i.length-1),e.mapOptionsToLevel=c({from:1,levels:o.levels,to:i.length-1,defaults:{borderColor:o.borderColor,borderRadius:o.borderRadius,borderWidth:o.borderWidth,color:e.color,colorByPoint:o.colorByPoint,levelIsConstant:!0,linkColor:o.linkColor,linkLineWidth:o.linkLineWidth,linkOpacity:o.linkOpacity,states:o.states}}),i))for(let t of n)e.translateNode(t,n);for(let n of this.nodes)for(let t of n.linksFrom)(t.weight||t.isNull)&&t.to&&(e.translateLink(t),t.allowShadow=!1)}translateLink(e){let t=(t,o)=>{let i=t.offset(e,o)*r;return Math.min(t.nodeY+i,t.nodeY+(t.shapeArgs&&t.shapeArgs.height||0)-m)},o=e.fromNode,i=e.toNode,s=this.chart,{inverted:n}=s,r=this.translationFactor,l=this.options,a=k(e.linkColorMode,l.linkColorMode),d=(s.inverted?-this.colDistance:this.colDistance)*l.curveFactor,h=o.nodeX,c=i.nodeX,u=e.outgoing,m=Math.max(e.weight*r,this.options.minLinkWidth),f=t(o,"linksFrom"),g=t(i,"linksTo"),y=this.nodeWidth,C=c>h+y;if(s.inverted&&(f=s.plotSizeY-f,g=(s.plotSizeY||0)-g,y=-y,m=-m,C=h>c),e.shapeType="path",e.linkBase=[f,f+m,g,g+m],C&&"number"==typeof g)e.shapeArgs={d:[["M",h+y,f],["C",h+y+d,f,c-d,g,c,g],["L",c+(u?y:0),g+m/2],["L",c,g+m],["C",c-d,g+m,h+y+d,f+m,h+y,f+m],["Z"]]};else if("number"==typeof g){let t=s.plotHeight-f-m,o=c-20-m,i=c-20,n=h+y,r=n+20,l=r+m,a=f,d=f+m,p=d+20,u=p+t,k=u+20,C=k+m,v=g,S=v+m,b=S+20,N=d-.7*m,x=k+.7*m,L=S-.7*m,w=c-.7*m,T=n+.7*m;e.shapeArgs={d:[["M",n,a],["C",T,a,l,N,l,p],["L",l,u],["C",l,x,T,C,n,C],["L",c,C],["C",w,C,o,x,o,u],["L",o,b],["C",o,L,w,v,c,v],["L",c,S],["C",i,S,i,S,i,b],["L",i,u],["C",i,k,i,k,c,k],["L",n,k],["C",r,k,r,k,r,u],["L",r,p],["C",r,d,r,d,n,d],["Z"]]}}if(e.dlBox={x:h+(c-h+y)/2,y:f+(g-f)/2,height:m,width:0},e.tooltipPos=s.inverted?[s.plotSizeY-e.dlBox.y-m/2,s.plotSizeX-e.dlBox.x]:[e.dlBox.x,e.dlBox.y+m/2],e.y=e.plotY=1,e.x=e.plotX=1,!e.options.color)if("from"===a)e.color=o.color;else if("to"===a)e.color=i.color;else if("gradient"===a){let t=p(o.color).get(),s=p(i.color).get();e.color={linearGradient:{x1:1,x2:0,y1:0,y2:0},stops:[[0,n?t:s],[1,n?s:t]]}}}translateNode(e,t){let o=this.translationFactor,i=this.chart,s=this.options,{borderRadius:n,borderWidth:r=0}=s,l=e.getSum(),a=Math.max(Math.round(l*o),this.options.minLinkWidth),d=Math.round(this.nodeWidth),h=Math.round(r)%2/2,p=t.sankeyColumn.offset(e,o),c=Math.floor(k(p.absoluteTop,t.sankeyColumn.top(o)+p.relativeTop))+h,u=Math.floor(this.colDistance*e.column+r/2)+C(e.options[i.inverted?"offsetVertical":"offsetHorizontal"]||0,d)+h,f=i.inverted?i.plotSizeX-u:u;if(e.sum=l,l){e.shapeType="roundedRect",e.nodeX=f,e.nodeY=c;let t=f,o=c,r=e.options.width||s.width||d,l=e.options.height||s.height||a,h=m(C("object"==typeof n?n.radius:n||0,r),0,a/2);i.inverted&&(t=f-d,o=i.plotSizeY-c-a,r=e.options.height||s.height||d,l=e.options.width||s.width||a),e.dlOptions=S.getDLOptions({level:this.mapOptionsToLevel[e.level],optionsPoint:e.options}),e.plotX=1,e.plotY=1,e.tooltipPos=i.inverted?[i.plotSizeY-o-l/2,i.plotSizeX-t-r/2]:[t+r/2,o+l/2],e.shapeArgs={x:t,y:o,width:r,height:l,r:h,display:e.hasShape()?"":"none"}}else e.dlOptions={enabled:!1}}}return S.defaultOptions=y(d.defaultOptions,i),t.compose(o,S),f(S.prototype,{animate:h.prototype.animate,createNode:t.createNode,forceDL:!0,invertible:!0,isCartesian:!1,orderNodes:!0,noSharedTooltip:!0,pointArrayMap:["from","to","weight"],pointClass:o,searchPoint:e.noop}),s.registerSeriesType("sankey",S),S})),o(t,"masters/modules/sankey.src.js",[t["Core/Globals.js"]],(function(e){return e}))},e.exports?(n.default=n,e.exports=n):(i=[o(4783)],void 0===(s=function(e){return n(e),n.Highcharts=e,n}.apply(t,i))||(e.exports=s))}}]);