/*! For license information please see 86.9ae33be2.js.LICENSE.txt */
"use strict";(self.webpackChunkpier_doc=self.webpackChunkpier_doc||[]).push([[86],{7086:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Mt});var n=o(6775),i=o(2454);const r=["click","dblclick"],s=["enter","leave"],a=r.concat(s);function d(t,e,o){if(t.listened)switch(e.type){case"mousemove":case"mouseout":!function(t,e){if(!t.moveListened)return;let o;"mousemove"===e.type&&(o=h(t.elements,e));const n=t.hovered;t.hovered=o,function(t,e,o){const{previous:n,element:i}=e;n&&n!==i&&l(n.options.leave||t.listeners.leave,n,o);i&&i!==n&&l(i.options.enter||t.listeners.enter,i,o)}(t,{previous:n,element:o},e)}(t,e);break;case"click":!function(t,e,o){const n=t.listeners,i=h(t.elements,e);if(i){const t=i.options,r=t.dblclick||n.dblclick,s=t.click||n.click;i.clickTimeout?(clearTimeout(i.clickTimeout),delete i.clickTimeout,l(r,i,e)):r?i.clickTimeout=setTimeout((()=>{delete i.clickTimeout,l(s,i,e)}),o.dblClickSpeed):l(s,i,e)}}(t,e,o)}}function l(t,e,o){(0,i.C)(t,[e.$context,o])}function h(t,e){let o=Number.POSITIVE_INFINITY;return t.filter((t=>t.options.display&&t.inRange(e.x,e.y))).reduce(((t,n)=>{const r=n.getCenterPoint(),s=(0,i.aG)(e,r);return s<o?(t=[n],o=s):s===o&&t.push(n),t}),[]).sort(((t,e)=>t._index-e._index)).slice(0,1)[0]}function c(t,e,o){const n=function(t,e){const o=t.axis,n=t.id,r=o+"ScaleID",s={min:(0,i.v)(t.min,Number.NEGATIVE_INFINITY),max:(0,i.v)(t.max,Number.POSITIVE_INFINITY)};for(const i of e)i.scaleID===n?x(i,t,["value","endValue"],s):i[r]===n&&x(i,t,[o+"Min",o+"Max",o+"Value"],s);return s}(e,o);let r=u(e,n,"min","suggestedMin");r=u(e,n,"max","suggestedMax")||r,r&&"function"==typeof e.handleTickRangeOptions&&e.handleTickRangeOptions()}function u(t,e,o,n){if((0,i.g)(e[o])&&!function(t,e,o){return(0,i.j)(t[e])||(0,i.j)(t[o])}(t.options,o,n)){const n=t[o]!==e[o];return t[o]=e[o],n}}function f(t,e){for(const o of["scaleID","xScaleID","yScaleID"])t[o]&&!e[t[o]]&&b(t,o)&&console.warn(`No scale found with id '${t[o]}' for annotation '${t.id}'`)}function b(t,e){if("scaleID"===e)return!0;const o=e.charAt(0);for(const n of["Min","Max","Value"])if((0,i.j)(t[o+n]))return!0;return!1}function x(t,e,o,n){for(const r of o){const o=t[r];if((0,i.j)(o)){const t=e.parse(o);n.min=Math.min(n.min,t),n.max=Math.max(n.max,t)}}}const y=.001,p=(t,e,o)=>Math.min(o,Math.max(e,t));function g(t,e,o){for(const n of Object.keys(t))t[n]=p(t[n],e,o);return t}function w(t,e,{x:o,y:n,width:i,height:r},s){const a=s/2;return t>=o-a-y&&t<=o+i+a+y&&e>=n-a-y&&e<=n+r+a+y}function m(t,e){const{x:o,y:n}=t.getProps(["x","y"],e);return{x:o,y:n}}const v=(t,e)=>e>t||t.length>e.length&&t.substr(0,e.length)===e;const S=t=>"string"==typeof t&&t.endsWith("%"),M=t=>p(parseFloat(t)/100,0,1);function C(t,e){return"start"===e?0:"end"===e?t:S(e)?M(e)*t:t/2}function k(t,e){return"number"==typeof e?e:S(e)?M(e)*t:t}function P(t){return(0,i.i)(t)?{x:(0,i.v)(t.x,"center"),y:(0,i.v)(t.y,"center")}:{x:t=(0,i.v)(t,"center"),y:t}}function D(t){return t&&((0,i.j)(t.xValue)||(0,i.j)(t.yValue))}const j=new Map;function W(t){if(t&&"object"==typeof t){const e=t.toString();return"[object HTMLImageElement]"===e||"[object HTMLCanvasElement]"===e}}function O(t,e,o){if(o){const n=e.getCenterPoint();t.translate(n.x,n.y),t.rotate((0,i.t)(o)),t.translate(-n.x,-n.y)}}function I(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function A(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function T(t,e){const o=e.content;if(W(o))return{width:k(o.width,e.width),height:k(o.height,e.height)};const n=(0,i.O)(e.font),r=e.textStrokeWidth,s=(0,i.b)(o)?o:[o],a=s.join()+n.string+r+(t._measureText?"-spriting":"");if(!j.has(a)){t.save(),t.font=n.string;const e=s.length;let o=0;for(let n=0;n<e;n++){const e=s[n];o=Math.max(o,t.measureText(e).width+r)}t.restore();const i=e*n.lineHeight+r;j.set(a,{width:o,height:i})}return j.get(a)}function R(t,e,o){const{x:n,y:r,width:s,height:a}=e;t.save(),A(t,o);const d=I(t,o);t.fillStyle=o.backgroundColor,t.beginPath(),(0,i.av)(t,{x:n,y:r,w:s,h:a,radius:g((0,i.ax)((0,i.v)(o.cornerRadius,o.borderRadius)),0,Math.min(s,a)/2)}),t.closePath(),t.fill(),d&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}function E(t,e,o){const n=o.content;if(W(n))return void t.drawImage(n,e.x,e.y,e.width,e.height);const r=(0,i.b)(n)?n:[n],s=(0,i.O)(o.font),a=s.lineHeight,d=function(t,e){const{x:o,width:n}=t,i=e.textAlign;return"center"===i?o+n/2:"end"===i||"right"===i?o+n:o}(e,o),l=e.y+a/2+o.textStrokeWidth/2;t.save(),t.font=s.string,t.textBaseline="middle",t.textAlign=o.textAlign,function(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}(t,o)&&r.forEach(((e,o)=>t.strokeText(e,d,l+o*a))),t.fillStyle=o.color,r.forEach(((e,o)=>t.fillText(e,d,l+o*a))),t.restore()}function Y(t){const{x:e,y:o,width:n,height:i}=t;return{x:e+n/2,y:o+i/2}}function X(t,e,o){const n=Math.cos(o),i=Math.sin(o),r=e.x,s=e.y;return{x:r+n*(t.x-r)-i*(t.y-s),y:s+i*(t.x-r)+n*(t.y-s)}}function _(t,e,o){return e="number"==typeof e?e:t.parse(e),(0,i.g)(e)?t.getPixelForValue(e):o}function L(t,e){if(t){const o=_(t,e.min,e.start),n=_(t,e.max,e.end);return{start:Math.min(o,n),end:Math.max(o,n)}}return{start:e.start,end:e.end}}function V(t,e){const{chartArea:o,scales:n}=t,i=n[e.xScaleID],r=n[e.yScaleID];let s=o.width/2,a=o.height/2;return i&&(s=_(i,e.xValue,s)),r&&(a=_(r,e.yValue,a)),{x:s,y:a}}function H(t,e){const o=t.scales[e.xScaleID],n=t.scales[e.yScaleID];let{top:i,left:r,bottom:s,right:a}=t.chartArea;if(!o&&!n)return{};const d=L(o,{min:e.xMin,max:e.xMax,start:r,end:a});r=d.start,a=d.end;const l=L(n,{min:e.yMin,max:e.yMax,start:i,end:s});return i=l.start,s=l.end,{x:r,y:i,x2:a,y2:s,width:a-r,height:s-i}}function N(t,e){if(!D(e)){const o=H(t,e),n=Y(o);let i=e.radius;return i&&!isNaN(i)||(i=Math.min(o.width,o.height)/2,e.radius=i),{x:n.x+e.xAdjust,y:n.y+e.yAdjust,width:2*i,height:2*i}}return function(t,e){const o=V(t,e);return{x:o.x+e.xAdjust,y:o.y+e.yAdjust,width:2*e.radius,height:2*e.radius}}(t,e)}class z extends n.W_{inRange(t,e,o){const{x:n,y:r}=X({x:t,y:e},this.getCenterPoint(o),(0,i.t)(-this.options.rotation));return w(n,r,this.getProps(["x","y","width","height"],o),this.options.borderWidth)}getCenterPoint(t){return Y(this.getProps(["x","y","width","height"],t))}draw(t){t.save(),O(t,this,this.options.rotation),R(t,this,this.options),t.restore()}drawLabel(t){const{x:e,y:o,width:n,height:r,options:s}=this,{label:a,borderWidth:d}=s,l=d/2,h=P(a.position),c=(0,i.K)(a.padding),u=T(t,a),f={x:B(this,u,h,c),y:$(this,u,h,c),width:u.width,height:u.height};t.save(),O(t,this,a.rotation),t.beginPath(),t.rect(e+l+c.left,o+l+c.top,n-d-c.width,r-d-c.height),t.clip(),E(t,f,a),t.restore()}resolveElementProperties(t,e){return H(t,e)}}function B(t,e,o,n){const{x:i,x2:r,width:s,options:a}=t,{xAdjust:d,borderWidth:l}=a.label;return J({start:i,end:r,size:s},{position:o.x,padding:{start:n.left,end:n.right},adjust:d,borderWidth:l,size:e.width})}function $(t,e,o,n){const{y:i,y2:r,height:s,options:a}=t,{yAdjust:d,borderWidth:l}=a.label;return J({start:i,end:r,size:s},{position:o.y,padding:{start:n.top,end:n.bottom},adjust:d,borderWidth:l,size:e.height})}function J(t,e){const{start:o,end:n}=t,{position:i,padding:{start:r,end:s},adjust:a,borderWidth:d}=e;return o+d/2+a+r+C(n-d-o-r-s-e.size,i)}z.id="boxAnnotation",z.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},z.defaultRoutes={borderColor:"color",backgroundColor:"color"},z.descriptors={label:{_fallback:!0}};const F=(t,e,o)=>({x:t.x+o*(e.x-t.x),y:t.y+o*(e.y-t.y)}),K=(t,e,o)=>F(e,o,Math.abs((t-e.y)/(o.y-e.y))).x,U=(t,e,o)=>F(e,o,Math.abs((t-e.x)/(o.x-e.x))).y,G=t=>t*t,q=.001;function Q({x:t,y:e,x2:o,y2:n},{top:i,right:r,bottom:s,left:a}){return!(t<a&&o<a||t>r&&o>r||e<i&&n<i||e>s&&n>s)}function Z({x:t,y:e},o,{top:n,right:i,bottom:r,left:s}){return t<s&&(e=U(s,{x:t,y:e},o),t=s),t>i&&(e=U(i,{x:t,y:e},o),t=i),e<n&&(t=K(n,{x:t,y:e},o),e=n),e>r&&(t=K(r,{x:t,y:e},o),e=r),{x:t,y:e}}class tt extends n.W_{intersects(t,e,o=.001,n){const{x:i,y:r,x2:s,y2:a}=this.getProps(["x","y","x2","y2"],n),d=s-i,l=a-r,h=G(d)+G(l),c=0===h?-1:((t-i)*d+(e-r)*l)/h;let u,f;return c<0?(u=i,f=r):c>1?(u=s,f=a):(u=i+c*d,f=r+c*l),G(t-u)+G(e-f)<=o}labelIsVisible(t,e){const o=this.options.label;return!(!o||!o.enabled)&&(!e||Q(this.getProps(["x","y","x2","y2"],t),e))}isOnLabel(t,e,o){if(!this.labelIsVisible(o))return!1;const{labelX:n,labelY:i,labelWidth:r,labelHeight:s,labelRotation:a}=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],o),{x:d,y:l}=X({x:t,y:e},{x:n,y:i},-a),h=this.options.label.borderWidth/2||0,c=r/2+h,u=s/2+h;return d>=n-c-q&&d<=n+c+q&&l>=i-u-q&&l<=i+u+q}inRange(t,e,o){const n=G(this.options.borderWidth/2);return this.intersects(t,e,n,o)||this.isOnLabel(t,e,o)}getCenterPoint(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}draw(t){const{x:e,y:o,x2:n,y2:i,options:r}=this;if(t.save(),!I(t,r))return t.restore();A(t,r);const s=Math.atan2(i-o,n-e),a=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-o,2)),{startOpts:d,endOpts:l,startAdjust:h,endAdjust:c}=function(t){const e=t.options,o=e.arrowHeads&&e.arrowHeads.start,n=e.arrowHeads&&e.arrowHeads.end;return{startOpts:o,endOpts:n,startAdjust:it(t,o),endAdjust:it(t,n)}}(this);t.translate(e,o),t.rotate(s),t.beginPath(),t.moveTo(0+h,0),t.lineTo(a-c,0),t.shadowColor=r.borderShadowColor,t.stroke(),rt(t,0,h,d),rt(t,a,-c,l),t.restore()}drawLabel(t,e){if(!this.labelIsVisible(!1,e))return;const{labelX:o,labelY:n,labelWidth:i,labelHeight:r,labelRotation:s,labelPadding:a,labelTextSize:d,options:{label:l}}=this;t.save(),t.translate(o,n),t.rotate(s);R(t,{x:-i/2,y:-r/2,width:i,height:r},l);E(t,{x:-i/2+a.left+l.borderWidth/2,y:-r/2+a.top+l.borderWidth/2,width:d.width,height:d.height},l),t.restore()}resolveElementProperties(t,e){const o=t.scales[e.scaleID];let n,r,{top:s,left:a,bottom:d,right:l}=t.chartArea;if(o)n=_(o,e.value,NaN),r=_(o,e.endValue,n),o.isHorizontal()?(a=n,l=r):(s=n,d=r);else{const o=t.scales[e.xScaleID],n=t.scales[e.yScaleID];o&&(a=_(o,e.xMin,a),l=_(o,e.xMax,l)),n&&(s=_(n,e.yMin,s),d=_(n,e.yMax,d))}const h=Q({x:a,y:s,x2:l,y2:d},t.chartArea)?function(t,e,o){const{x:n,y:i}=Z(t,e,o),{x:r,y:s}=Z(e,t,o);return{x:n,y:i,x2:r,y2:s,width:Math.abs(r-n),height:Math.abs(s-i)}}({x:a,y:s},{x:l,y:d},t.chartArea):{x:a,y:s,x2:l,y2:d,width:Math.abs(l-a),height:Math.abs(d-s)},c=e.label;return c&&c.content?function(t,e,o){const{padding:n,xPadding:r,yPadding:s,borderWidth:a}=o,d=function(t,e,o){let n=t;(e||o)&&(n={x:e||6,y:o||6});return(0,i.K)(n)}(n,r,s),l=T(e.ctx,o),h=l.width+d.width+a,c=l.height+d.height+a,u=function(t,e,o,n){const{width:r,height:s,padding:a}=o,{xAdjust:d,yAdjust:l}=e,h={x:t.x,y:t.y},c={x:t.x2,y:t.y2},u="auto"===e.rotation?function(t){const{x:e,y:o,x2:n,y2:r}=t,s=Math.atan2(r-o,n-e);return s>i.P/2?s-i.P:s<i.P/-2?s+i.P:s}(t):(0,i.t)(e.rotation),f=function(t,e,o){const n=Math.cos(o),i=Math.sin(o);return{w:Math.abs(t*n)+Math.abs(e*i),h:Math.abs(t*i)+Math.abs(e*n)}}(r,s,u),b=function(t,e,o,n){let i;const r=function(t,e){const{x:o,x2:n,y:i,y2:r}=t,s=Math.min(i,r)-e.top,a=Math.min(o,n)-e.left,d=e.bottom-Math.max(i,r),l=e.right-Math.max(o,n);return{x:Math.min(a,l),y:Math.min(s,d),dx:a<=l?1:-1,dy:s<=d?1:-1}}(t,n);i="start"===e.position?ot({w:t.x2-t.x,h:t.y2-t.y},o,e,r):"end"===e.position?1-ot({w:t.x-t.x2,h:t.y-t.y2},o,e,r):C(1,e.position);return i}(t,e,{labelSize:f,padding:a},n),x=F(h,c,b),y={size:f.w,min:n.left,max:n.right,padding:a.left},p={size:f.h,min:n.top,max:n.bottom,padding:a.top};return{x:nt(x.x,y)+d,y:nt(x.y,p)+l,width:r,height:s,rotation:u}}(t,o,{width:h,height:c,padding:d},e.chartArea);return t.labelX=u.x,t.labelY=u.y,t.labelWidth=u.width,t.labelHeight=u.height,t.labelRotation=u.rotation,t.labelPadding=d,t.labelTextSize=l,t}(h,t,c):h}}tt.id="lineAnnotation";const et={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function ot(t,e,o,n){const{labelSize:i,padding:r}=e,s=t.w*n.dx,a=t.h*n.dy,d=s>0&&(i.w/2+r.left-n.x)/s,l=a>0&&(i.h/2+r.top-n.y)/a;return p(Math.max(d,l),0,.25)}function nt(t,e){const{size:o,min:n,max:i,padding:r}=e,s=o/2;return o>i-n?(i+n)/2:(n>=t-r-s&&(t=n+r+s),i<=t+r+s&&(t=i-r-s),t)}function it(t,e){if(!e||!e.enabled)return 0;const{length:o,width:n}=e,i=t.options.borderWidth/2,r={x:o,y:n+i},s={x:0,y:i};return Math.abs(K(0,r,s))}function rt(t,e,o,n){if(!n||!n.enabled)return;const{length:i,width:r,fill:s,backgroundColor:a,borderColor:d}=n,l=Math.abs(e-i)+o;t.beginPath(),A(t,n),I(t,n),t.moveTo(l,-r),t.lineTo(e+o,0),t.lineTo(l,r),!0===s?(t.fillStyle=a||d,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=n.borderShadowColor,t.stroke()}tt.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},et),fill:!1,length:12,start:Object.assign({},et),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},tt.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},tt.defaultRoutes={borderColor:"color"};class st extends n.W_{inRange(t,e,o){return function(t,e,o,n){const{width:r,height:s}=e,a=e.getCenterPoint(!0),d=r/2,l=s/2;if(d<=0||l<=0)return!1;const h=(0,i.t)(o||0),c=n/2||0,u=Math.cos(h),f=Math.sin(h),b=Math.pow(u*(t.x-a.x)+f*(t.y-a.y),2),x=Math.pow(f*(t.x-a.x)-u*(t.y-a.y),2);return b/Math.pow(d+c,2)+x/Math.pow(l+c,2)<=1.0001}({x:t,y:e},this.getProps(["width","height"],o),this.options.rotation,this.options.borderWidth)}getCenterPoint(t){return Y(this.getProps(["x","y","width","height"],t))}draw(t){const{width:e,height:o,options:n}=this,r=this.getCenterPoint();t.save(),O(t,this,n.rotation),A(t,this.options),t.beginPath(),t.fillStyle=n.backgroundColor;const s=I(t,n);t.ellipse(r.x,r.y,o/2,e/2,i.P/2,0,2*i.P),t.fill(),s&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){return H(t,e)}}st.id="ellipseAnnotation",st.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},st.defaultRoutes={borderColor:"color",backgroundColor:"color"};class at extends n.W_{inRange(t,e,o){const{x:n,y:r}=X({x:t,y:e},this.getCenterPoint(o),(0,i.t)(-this.options.rotation));return w(n,r,this.getProps(["x","y","width","height"],o),this.options.borderWidth)}getCenterPoint(t){return Y(this.getProps(["x","y","width","height"],t))}draw(t){if(!this.options.content)return;const{labelX:e,labelY:o,labelWidth:n,labelHeight:r,options:s}=this;t.save(),O(t,this,s.rotation),function(t,e){const{pointX:o,pointY:n,calloutPosition:r,options:s}=e;if(!r||e.inRange(o,n))return;const a=s.callout;t.save(),t.beginPath();const d=I(t,a);if(!d)return t.restore();const{separatorStart:l,separatorEnd:h}=function(t,e){const{x:o,y:n,width:i,height:r}=t,s=function(t,e){const{width:o,height:n,options:i}=t,r=i.callout.margin+i.borderWidth/2;if("right"===e)return o+r;if("bottom"===e)return n+r;return-r}(t,e);let a,d;"left"===e||"right"===e?(a={x:o+s,y:n},d={x:a.x,y:a.y+r}):(a={x:o,y:n+s},d={x:a.x+i,y:a.y});return{separatorStart:a,separatorEnd:d}}(e,r),{sideStart:c,sideEnd:u}=function(t,e,o){const{y:n,width:i,height:r,options:s}=t,a=s.callout.start,d=function(t,e){const o=e.side;if("left"===t||"top"===t)return-o;return o}(e,s.callout);let l,h;"left"===e||"right"===e?(l={x:o.x,y:n+k(r,a)},h={x:l.x+d,y:l.y}):(l={x:o.x+k(i,a),y:o.y},h={x:l.x,y:l.y+d});return{sideStart:l,sideEnd:h}}(e,r,l);(a.margin>0||0===s.borderWidth)&&(t.moveTo(l.x,l.y),t.lineTo(h.x,h.y));t.moveTo(c.x,c.y),t.lineTo(u.x,u.y);const f=X({x:o,y:n},e.getCenterPoint(),(0,i.t)(-s.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}(t,this),R(t,this,s),E(t,{x:e,y:o,width:n,height:r},s),t.restore()}resolveElementProperties(t,e){const o=D(e)?V(t,e):Y(H(t,e)),n=(0,i.K)(e.padding),r=T(t.ctx,e),s=function(t,e,o,n){const i=e.width+n.width+o.borderWidth,r=e.height+n.height+o.borderWidth,s=P(o.position);return{x:dt(t.x,i,o.xAdjust,s.x),y:dt(t.y,r,o.yAdjust,s.y),width:i,height:r}}(o,r,e,n),a=e.borderWidth/2,d={pointX:o.x,pointY:o.y,...s,labelX:s.x+n.left+a,labelY:s.y+n.top+a,labelWidth:r.width,labelHeight:r.height};return d.calloutPosition=e.callout.enabled&&function(t,e,o){const n=e.position;if("left"===n||"right"===n||"top"===n||"bottom"===n)return n;return function(t,e,o){const{x:n,y:r,width:s,height:a,pointX:d,pointY:l}=t,h={x:n+s/2,y:r+a/2},c=e.start,u=k(s,c),f=k(a,c),b=[n,n+u,n+u,n+s],x=[r+f,r+a,r,r+f],y=[];for(let p=0;p<4;p++){const t=X({x:b[p],y:x[p]},h,(0,i.t)(o));y.push({position:lt[p],distance:(0,i.aG)(t,{x:d,y:l})})}return y.sort(((t,e)=>t.distance-e.distance))[0].position}(t,e,o)}(d,e.callout,e.rotation),d}}function dt(t,e,o=0,n){return t-C(e,n)+o}at.id="labelAnnotation",at.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},at.defaultRoutes={borderColor:"color"};const lt=["left","bottom","top","right"];class ht extends n.W_{inRange(t,e,o){const{width:n}=this.getProps(["width"],o);return function(t,e,o,n){if(!t||!e||o<=0)return!1;const i=n/2||0;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(o+i,2)}({x:t,y:e},this.getCenterPoint(o),n/2,this.options.borderWidth)}getCenterPoint(t){return m(this,t)}draw(t){const e=this.options,o=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,A(t,e);const n=I(t,e);e.borderWidth=0,(0,i.au)(t,e,this.x,this.y),n&&!W(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=o}resolveElementProperties(t,e){return N(t,e)}}ht.id="pointAnnotation",ht.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},ht.defaultRoutes={borderColor:"color",backgroundColor:"color"};class ct extends n.W_{inRange(t,e,o){return this.options.radius>=.1&&this.elements.length>1&&function(t,e,o,n){let i=!1,r=t[t.length-1].getProps(["bX","bY"],n);for(const s of t){const t=s.getProps(["bX","bY"],n);t.bY>o!=r.bY>o&&e<(r.bX-t.bX)*(o-t.bY)/(r.bY-t.bY)+t.bX&&(i=!i),r=t}return i}(this.elements,t,e,o)}getCenterPoint(t){return m(this,t)}draw(t){const{elements:e,options:o}=this;t.save(),t.beginPath(),t.fillStyle=o.backgroundColor,A(t,o);const n=I(t,o);let i=!0;for(const r of e)i?(t.moveTo(r.x,r.y),i=!1):t.lineTo(r.x,r.y);t.closePath(),t.fill(),n&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){const{x:o,y:n,width:r,height:s}=N(t,e),{sides:a,radius:d,rotation:l,borderWidth:h}=e,c=h/2,u=[],f=2*i.P/a;let b=l*i.b2;for(let i=0;i<a;i++,b+=f){const t=Math.sin(b),e=Math.cos(b);u.push({type:"point",optionScope:"point",properties:{x:o+t*d,y:n-e*d,bX:o+t*(d+c),bY:n-e*(d+c)}})}return{x:o,y:n,width:r,height:s,elements:u,initProperties:{x:o,y:n}}}}ct.id="polygonAnnotation",ct.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},ct.defaultRoutes={borderColor:"color",backgroundColor:"color"};const ut={box:z,ellipse:st,label:at,line:tt,point:ht,polygon:ct};Object.keys(ut).forEach((t=>{n.ce.describe(`elements.${ut[t].id}`,{_fallback:"plugins.annotation"})}));const ft={update:Object.assign};function bt(t="line"){return ut[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function xt(t,e,o,r){const s=function(t,e,o){if("reset"===o||"none"===o||"resize"===o)return ft;return new n.FK(t,e)}(t,o.animations,r),a=e.annotations,d=function(t,e){const o=e.length,n=t.length;if(n<o){const e=o-n;t.splice(n,0,...new Array(e))}else n>o&&t.splice(o,n-o);return t}(e.elements,a);for(let n=0;n<a.length;n++){const e=a[n],o=gt(d,n,e.type),r=e.setContext(vt(t,o,e)),l=o.resolveElementProperties(t,r);l.skip=yt(l),"elements"in l&&(pt(o,l,r,s),delete l.elements),(0,i.j)(o.x)||Object.assign(o,l),l.options=wt(r),s.update(o,l)}}function yt(t){return isNaN(t.x)||isNaN(t.y)}function pt(t,{elements:e,initProperties:o},n,i){const r=t.elements||(t.elements=[]);r.length=e.length;for(let s=0;s<e.length;s++){const t=e[s],a=t.properties,d=gt(r,s,t.type,o),l=n[t.optionScope].override(t);a.options=wt(l),i.update(d,a)}}function gt(t,e,o,n){const r=ut[bt(o)];let s=t[e];return s&&s instanceof r||(s=t[e]=new r,(0,i.i)(n)&&Object.assign(s,n)),s}function wt(t){const e=ut[bt(t.type)],o={};o.id=t.id,o.type=t.type,o.drawTime=t.drawTime,Object.assign(o,mt(t,e.defaults),mt(t,e.defaultRoutes));for(const n of a)o[n]=t[n];return o}function mt(t,e){const o={};for(const n of Object.keys(e)){const r=e[n],s=t[n];o[n]=(0,i.i)(r)?mt(s,r):s}return o}function vt(t,e,o){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,id:o.id,type:"annotation"}))}const St=new Map;var Mt={id:"annotation",version:"1.4.0",afterRegister(){n.kL.register(ut),function(t,e,o,n=!0){const i=o.split(".");let r=0;for(const s of e.split(".")){const a=i[r++];if(parseInt(s,10)<parseInt(a,10))break;if(v(a,s)){if(n)throw new Error(`${t} v${o} is not supported. v${e} or newer is required.`);return!1}}return!0}("chart.js","3.7",n.kL.version,!1)||(console.warn("chartjs-plugin-annotation has known issues with chart.js versions prior to 3.7, please consider upgrading."),n.kL.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister(){n.kL.unregister(ut)},beforeInit(t){St.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate(t,e,o){const n=St.get(t).annotations=[];let r=o.annotations;(0,i.i)(r)?Object.keys(r).forEach((t=>{const e=r[t];(0,i.i)(e)&&(e.id=t,n.push(e))})):(0,i.b)(r)&&n.push(...r),function(t,e){for(const o of t)f(o,e)}(n,t.scales)},afterDataLimits(t,e){const o=St.get(t);c(0,e.scale,o.annotations.filter((t=>t.display&&t.adjustScaleRange)))},afterUpdate(t,e,o){const n=St.get(t);!function(t,e,o){e.listened=!1,e.moveListened=!1,a.forEach((t=>{"function"==typeof o[t]?(e.listened=!0,e.listeners[t]=o[t]):(0,i.j)(e.listeners[t])&&delete e.listeners[t]})),s.forEach((t=>{"function"==typeof o[t]&&(e.moveListened=!0)})),e.listened&&e.moveListened||e.annotations.forEach((t=>{e.listened||r.forEach((o=>{"function"==typeof t[o]&&(e.listened=!0)})),e.moveListened||s.forEach((o=>{"function"==typeof t[o]&&(e.listened=!0,e.moveListened=!0)}))}))}(0,n,o),xt(t,n,o,e.mode),n.visibleElements=n.elements.filter((t=>!t.skip&&t.options.display))},beforeDatasetsDraw(t,e,o){Ct(t,"beforeDatasetsDraw",o.clip)},afterDatasetsDraw(t,e,o){Ct(t,"afterDatasetsDraw",o.clip)},beforeDraw(t,e,o){Ct(t,"beforeDraw",o.clip)},afterDraw(t,e,o){Ct(t,"afterDraw",o.clip)},beforeEvent(t,e,o){d(St.get(t),e.event,o)},destroy(t){St.delete(t)},_getState:t=>St.get(t),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:t=>!a.includes(t),annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${ut[bt(e.type)].id}`}},additionalOptionScopes:[""]};function Ct(t,e,o){const{ctx:n,chartArea:r}=t,{visibleElements:s}=St.get(t);o&&(0,i.L)(n,r),kt(n,s,e),function(t,e,o){for(const n of e)(0,i.b)(n.elements)&&kt(t,n.elements,o)}(n,s,e),o&&(0,i.N)(n),s.forEach((t=>{if(!("drawLabel"in t))return;const o=t.options.label;o&&o.enabled&&o.content&&(o.drawTime||t.options.drawTime)===e&&t.drawLabel(n,r)}))}function kt(t,e,o){for(const n of e)n.options.drawTime===o&&n.draw(t)}}}]);